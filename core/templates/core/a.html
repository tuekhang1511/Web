<html lang="en">
  <head>
    <title>Code-Editor</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="codemirror.css" />
    <link rel="stylesheet" href="show-hint.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="index.css" />
  </head>

  <body>
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <ul class="nav navbar-nav">
          <li><a class="btn" id="run-btn">Run</a></li>
          <li class="nav-item dropdown">
            <a class="btn dropdown-toggle" type="button" data-toggle="dropdown"
              >Options <span class="caret"></span
            ></a>
            <ul class="dropdown-menu">
              <li><a href="javascript:autoFormatSelection()">Format</a></li>
              <li><a href="javascript:commentSelection(true)">Comment</a></li>
              <li>
                <a href="javascript:commentSelection(false)">Uncomment</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
    <div class="editor">
      <div id="resizeMe" class="code a">
        <div class="python-code"></div>
      </div>
      <div class="code pa">
        <iframe id="preview-window"></iframe>
      </div>
    </div>
  </body>
  <script src="codemirror.js"></script>
  <script src="formatting.js"></script>
  <script src="show-hint.js"></script>
  <script src="xml-hint.js"></script>
  <script src="python-hint.js"></script>
  <script src="xml.js"></script>
  <script src="javascript.js"></script>
  <script src="css.js"></script>
  <script src="python.js"></script>
  <script src="https://unpkg.com/split.js/dist/split.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script>
    Split([".a", ".pa"]);
    var pythonEditor = CodeMirror(
      document.querySelector(".editor .code .python-code"),
      {
        mode: "python",
        tabSize: 4,
        lineNumbers: true,
        extraKeys: { "Ctrl-Space": "autocomplete" },
      }
    );
    CodeMirror.commands["selectAll"](pythonEditor);

    function getSelectedRange() {
      return {
        from: pythonEditor.getCursor(true),
        to: pythonEditor.getCursor(false),
      };
    }

    function autoFormatSelection() {
      var range = getSelectedRange();
      pythonEditor.autoFormatRange(range.from, range.to);
    }

    function commentSelection(isComment) {
      var range = getSelectedRange(),
        selStart = pythonEditor.getCursor("start");
      pythonEditor.commentRange(isComment, range.from, range.to);
      pythonEditor.setSelection(selStart, pythonEditor.getCursor("end"));
    }
    
    document.querySelector("#run-btn").addEventListener("click", function () {
      let pythonCode = pythonEditor.getValue();
      // Perform actions with the Python code
      let previewWindow =
        document.querySelector("#preview-window").contentWindow.document;
        previewWindow.open();
        previewWindow.write(htmlCode);
        previewWindow.close();
    });

  </script>
</html>